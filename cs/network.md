# Network

면접을 위한 cs 전공지식 노트 - 네트워크

## 네트워크의 기초

`네트워크`는 통신 기술로 구축하는 연결망이다. 또한 `노드node`와 `링크link`가 서로 연결되어 있거나 연결되어 있지 않는 집합체이다. 노드는 서버, 라우터, 스위치 등 네트워크 장치를 의미하고 링크는 유선 또는 무선을 의미한다.

좋은 네트워크는 `많은 처리량`을 처리할 수 있고 `지연 시간이 짧고` `장애 빈도가 적으며` `좋은 보안`을 갖춘 네트워크이다. 

`처리량throughput`은 링크를 통해 전달되는 단위 시간당 데이터양이다. `bps`(bits per second) 초당 전송/수신 비트수 단위를 사용한다. 사용자들이 많을 수록 커지는 `트래픽`, 네트워크 장치 간의 `대역폭`(네트워크 연결로 흐를 수 있는 최대 비트 수), 네트워크 중간에 발생하는 `에러`, 장치의 `하드웨어 스펙`에 영향을 받는다.

`지연 시간latency`는 요청이 처리되는 시간으로 두 장치간 데이터가 왕복하는데 걸린 시간이다. `매체의 타입`(유/무선), `패킷 크기`, `라우터의 패킷 처리 시간`에 영향을 받는다.

`네트워크 토폴로지network topology`는 노드와 링크가 어떻게 배치되어 있는지에 대한 방식이자 연결 형태이다. 트리, 버스, 스타, 링형, 메시형이 있다.

`트리tree 토폴로지`는 `계층`형 토폴로지라고도 부른다. 노드의 `추가/삭제가 쉽고` 특정 노드에 트래픽이 집중될 때 하위 노드에 영향을 끼친다.

`버스bus 토폴로지`는 `중앙 통신 회선` 하나에 여러개의 노드가 연결되어 공유한다. 근거리 통신망`LAN`에서 사용한다. 설치 `비용이 적고` `신뢰성이 우수`하며 회선에 `노드 추가/삭제가 쉽다`. 다만 스푸핑이 쉽다. `스푸핑`은 송신부의 패킷을 송신과 관련 없는 다른 호스트에 가지 않도록 하는 `스위칭 기능을 마비`시켜 특정 악의적인 노드에 해당 패킷이 오도록 처리한다. 

`스타star 토폴로지`는 `중앙의 노드`에 모두 연결된 구성이다. `노드를 추가`하거나 `에러를 탐지`하기 쉽고 `패킷 충돌 발생 가능성이 적다`. 어떤 노드에 장애가 발생하면 `에러를 쉽게 발견`하고 장애 노드가 중앙 노드가 아니라면 다른 노드에 영향을 끼치지 않는다. 다만 `중앙 노드에 장애가 발생하면 전체 네트워크를 사용할 수 없고` 설치`비용`이 비싸다.

`링형ring 토폴로지`는 각각의 노드가 양 옆의 두 노드와 연결되어 전체적으로 고리처럼 `하나의 연속된 길`을 통해 패킷을 처리한다. 노드 수가 증가해도 네트워크 상 손실이 거의 없고 충돌 가능성이 적다. 노드의 고장 발견이 쉽다. 하지만 네트워크 구성 변경이 어렵고 `회선에 장애`가 발생하면 전체 네트워크에 영향을 크게 미친다.

`메시mesh 토폴로지`는 망형 토폴로지라고도 한다. 그물망처럼 연결된다. 한 단말 장치에 장애가 발생해도 여러개의 경로가 존재해 네트워크를 계속 사용할 수 있고 트래픽도 `분산처리`가 가능하다. 하지만 노드의 추가가 어렵고 구축 비용과 운용 `비용이 고가`이다.

토폴로지가 중요한 이유는 `병목 현상`을 찾을 때의 기준이 되기 때문이다. 병목bottleneck 현상은 전체 시스템의 성능이나 용량이 하나의 구성 요소로 인해 `제한`을 받는 현상이다. 서비스에서 이벤트를 열었을 때 트래픽이 많이 생기고 그 트래픽을 관리하지 못하면 병목 현상이 생긴다.

만약 병목 현상이 생기면 관리자가 네트워크 토폴로지를 확인하고 해결할 수 있다. 해당 병목현상이 서버와 게이트웨이의 회선 부족인지, 대역폭의 문제인지를 토폴로지를 통해 알 수 있는 것이다.

네트워크는 규모를 기반으로 `LAN`(local Area Network), `MAN`(Metro plitan Area Network), `WAN`(Wide Area Network)로 나뉜다. LAN은 근거리 통신망으로 좁은 공간에서 운영되고 전송 속도가 빠르고 혼잡하지 않다. MAN은 대도시 지역 네트워크로 전송 속도는 보통이고 조금 혼잡하다. WAN은 광역 네트워크로 국가 또는 대륙에서 운영되며 전송 속도는 낮고 많이 혼잡하다.

만약 애플리케이션 코드 상에 문제가 없는데 사용자가 서비스로부터 데이터를 가져오지 못한다면 네트워크 병목 현상일 가능성이 있다. 원인으로는 `대역폭`, `토폴로지`, `서버 CPU와 메모리 사용량`, `비효율적인 네트워크 구성` 등이 있을 수 있다. 먼저 네트워크 테스트와 무관한 테스트를 통해 네트워크로부터 발생한 문제점이라는 것을 확인한 후, 네트워크 성능 분석을 해야한다.

`ping`(packet internet group)은 네트워크 상태를 확인하려는 대상 노드를 향해 일정 크기의 패킷을 전송하는 명령어이다. 해당 노드의 패킷 수신 상태와 도달 시간을 알아내 네트워크가 잘 연결되어 있는지 확인할 수 있다. TCP/IP 프로토콜 중에 `ICMP 프로토콜`을 통해 동작하기 때문에 ICMP 프로토콜을 지원하지 않는 기기를 대상으로는 실행할 수 없거나 네트워크 정책상 ICMP와 traceroute를 차단하면 ping 테스팅은 불가능하다.

![ping](https://velog.velcdn.com/images/sujeong7474/post/8837257a-266a-4127-a6e0-986a3d85dc70/image.png)

## TCP/IP 4 계층 모델

## 네트워크 기기

## IP 주소

## HTTP

# Network 예상 질문 - 답변

## HTTP/2를 설명하고 장점 두가지

## HTTP와 HTTPS의 차이점
<details>
  <summary>HTTP(HyperText Transfer Protocol)</summary>
  서로 다른 시스템들이 통신을 주고받게 하는 프로토콜이다. 서버에서 자신의 브라우저로 데이터를 전송해주는 용도로 많이 사용된다.

  하지만 `사용자로부터 브라우저로 전송되는 정보`가 암호화가 되지 않는다.
  </details>

  <details>
  <summary>HTTPS(HyperText Transfer Protocol Secure)</summary>
    SSL(보안 소켓 계층)는 서버와 브라우저 사이에 안전하게 암호화된 연결을 만들어주고 민감한 정보를 주고받을 때 도난당하는 것을 막아준다.

`SSL 인증서`는 사용자가 사이트에 제공하는 정보를 `암호화`한다. 또한 `TLS(전송 계층 보안)` 프로토콜을 통해 보안을 유지한다. TLS은 `데이터 무결성을 제공`하고 데이터가 전송 중에 수정되거나 손상되는 것을 방지한다. 또한 사용자가 자신이 의도하는 웹사이트와 통신하고 있음을 입증하는 인증 기능이 있다.

`검색엔진 최적화(SEO)`에도 혜택을 볼 수 있다. 다만 모든 데이터를 암호화해서 통신하면 과부화로 속도가 느려질 수 있다. 
  </details>


> 차이점
>
> HTTP는 서버로부터 브라우저로 전송되는 정보가 암호화가 되지 않지만 HTTPS는 SSL 인증서로 패킷을 암호화하고 TLS 프로토콜로 데이터 무결성을 제공한다. 또한 검색엔진 최적화 기능에서 혜택이 있다.

## TCP와 UDP의 차이점

  <details>
  <summary>TCP</summary>
TCP(Transmission Control Protocol)는 OSI 7 layer와 TCP/IP 4 layer의 전송계층에서 사용되는 프로토콜이다. 인터넷상에서 데이터를 메세지 형태로 보내기 위해 IP가 데이터를 배달하면 TCP가 패킷을 추적하고 관리한다.

`연결형` 서비스로 발신지와 수신지를 연결하여 패킷을 전송하기 위한 논리적 경로를 배정하는 `가상 회선 방식`을 제공한다. 서버 소켓은 연결만 담당한다. `3-way handshaking` 과정으로 목적지와 수신지를 확실하게 하여 세션을 수립한다. 따라서 높은 신뢰성을 보장한다.

데이터 처리속도를 조절하여 수신자의 버퍼 오버플로우를 방지하는 `흐름 제어`와 네트워크 내의 패킷 수가 증가하지 않도록 방지하는`혼잡 제어`가 이루어져 이는 CPU를 사용하기 때문에 속도에 영향을 주기 때문에 UDP보다 `속도가 느리다`. 

연속성보다 `신뢰성있는 전송`이 필요할 때 사용하는 프로토콜로 파일 전송 등이 있다. 패킷에 대한 응답이 이루어져 성능이 낮고 패킷이 손실되면 재전송 요청을 하기 때문에 streaming 서비스에 불리하다. 
  </details>

  <details>
  <summary>UDP</summary>
  UDP(User Datagram Protocol)는 데이터그램이라는 독립적인 관계를 지니는 패킷 단위로 데이터를 처리하는 프로토콜이다. 메세지 단위이다.

논리적인 경로가 없고 패킷이 독립적인 관계를 가지는 데이터를 서로 다른 경로로 처리한다.

`비연결형` 서비스이고 `데이터그램 방식`을 제공한다. 정보를 주고 받을 때 신호 절차가 없고 패킷에 순서를 부여하여 재조립하거나 흐름 제어와 혼잡 제어도 하지 않아 `속도가 빠르고` 부하가 적지만 신뢰성 있는 데이터 전송을 보장하지 못한다. 헤더의 checkSum 필드를 통해 최소한의 오류만 검증한다. 

신뢰성보다 `연속성`이 중요한 실시간 서비스에 사용된다.

소켓 대신 IP 기반 데이터 전송이 이루어진다.
  </details>

> 차이점
>
> TCP는 연결성 서비스로 가상회선 방식을 제공하는 프로토콜이고 UDP는 비연결성 서비스로 데이터그램 방식을 제공하는 프로토콜이다. TCP는 흐름 제어와 혼잡 제어가 있어 속도가 느리고 3 way handshaking 과정도 있어 신뢰성이 높다. UDP는 흐름 제어와 혼잡 제어도 없고 연결 신호 절차도 없어 속도가 빠르고 신뢰성보다 연속성이 중요한 실시간 서비스에 사용된다.

## TCP 3, 4 way handshake에 대해서 설명

  <details>
  <summary>TCP 3 way handshake</summary>
TCP 3 way handshake는 TCP의 `접속 과정`이다. TCP 통신을 이용하여 데이터를 전송하기 위해 네트워크 연결을 설정하는 과정으로, 양쪽 모두 데이터를 전송할 준비가 되었음을 보장하고 전달이 시작되기 전에 다른쪽이 준비되었다는 것을 알 수 있도록 하는 것이다. 

즉 통신을 하는 응용 프로그램이 데이터를 전송하기 전에 먼저 정확한 전송을 보장하기 위해 상대방 컴퓨터와 `사전에 세션을 수립`하는 과정이다.

PAR을 사용하는 기기는 `ACK`를 받을 때까지 데이터 유닛을 재전송하것인데, 수신자가 데이터 유닛이 손상된 것을 확인하면 해당 세그먼트를 없앤다. 전달자는 `positive ack`가 오지 않은 데이터 유닛을 다시 보내는 것이다. 이 과정에서 `3개의 세그먼트`가 교환되는 것이 3 way handshake이다.

클라이언트는 서버와 연결하기 위해 3 way handshake를 통해 연결을 요청한다. 클라이언트에서 `SYN(Synchronization)을 보내 서버에 연결 요청`을 한다. 세션을 설정하는데 사용되며 최초로 데이터를 전송할 때 임의의 랜덤한 `시퀀스 번호`를 함께 보낸다. 이때 클라이언트의 포트는 CLOSED에서 SYN_SENT로 변화하고 서버는 LISTEN 상태이다. 서버는 클라이언트로부터 SYN을 전송 받았다는 `ACK(Acknowledgement)`와 `SYN`의 시퀀스 번호에 TCP 계층에서의 길이 또는 양을 더한 것과 같은 값을 ACK에 포함하여 전송한다. 클라이언트의 포트는 CLOSED이고, 서버는 SYN_RCV 상태이다. 동기화에 대한 답변으로 클라이언트에서 시퀀스 번호에 1을 더하여 `ACK`를 돌려준다. 이때 전송할 데이터가 있다면 데이터를 전송할 수도 있다. 클라이언트의 포트는 `ESTABLISED(포트 연결 완료)` 상태이고 서버는 SYN_RCV에서 ESTABLISED로 변경된다. TCP는 3 way handshake로 데이터 송신과 수신이 가능하기 때문에 `full-duplex` 통신이 구축된다.

1. Client(CLOSED->SYN_SENT) -- SYN --> Server(LISTEN)
2. Client(SYN_SENT->CLOSED) <-- ACK, SYN -- Server(LISTEN->SYN_RCV)
3. Client(CLOSED->ESTABLISED) -- ACK --> Server(SYN_RCV->ESTABLISED)
 </details>

   <details>
  <summary>TCP 4 way handshake(작성중)</summary>

  TCP 4 way handshake는 TCP의 `접속 해제 과정`이다. 

서버와 클라이언트가 연결된 상태에서 클라이언트가 close()를 호출하여 접속을 끊으려 할때 FIN 플래그를 서버에게 보낸다. FIN 플래그에는 ACK가 포함되어 있다. 서버는 FIN 플래그를 받고 확인했다는 ACK를 클라이언트에게 보낸다. 이 상태가 TIME_WAIT 상태이다. 

  </details>

> 설명(작성중)
>
> TCP 3 way handshake는 TCP의 접속 과정이고 TCP 4 way handshake는 TCP의 접속 해제 과정이다. 3 way handshake는 사전에 세션을 연결하기 위해 3개의 세그먼트가 교환되는 것이 특징이고 클라이언트가 SYN를 서버에 보내 연결을 요청하고 서버는 ACK와 SYN의 시퀀스 번호에 TCP 계층의 길이를 포함해 클라이언트로 되돌려준다. 수신을 받은 클라이언트가 ACK를 서버에 되돌려주게 되면 포트가 ESTABLISED 상태가 되며 클라이언트와 서버 간의 full duplex 통신이 구축된다.





## OSI 7계층과 그 존재 이유, TCP/IP 4계층에 대해 설명

  <details>
  <summary>OSI 7계층</summary>
OSI는 Open Systems Interconnection의 약자로, 개방형 시스템 상호 연결 모델로 시스템 설계나 동작 원리가 오픈 되어있고 보편적으로 인정받거나 표준화된 시스템이다. 컴퓨터 간에 데이터를 주고 받기 위해 필요한 정보를 7단계로 정의한 것이다. 

실제 상업적이고 실무적으로 이용될 수 있도록 단순화된 현실화의 과정에서 채택된 모델로, 네트워크에서 통신이 일어나는 과정을 7단계로 나누어 표현하고 

OSI 7계층은 통신이 일어나는 과정을 단계별로 파악할 수 있어서, 특정한 계층에 이상이 생긴다면 다른 단계를 건드리지 않고도 
  </details>

  <details>
  <summary></summary>

  </details>



> 차이점
>
> 

## https://www.naver.com을 접속할때 일어나는 일 : 웹 통신의 큰 흐름 설명

  <details>
  <summary></summary>

  </details>

> 차이점
>
> 

## SSL handshake에 대해서 설명

  <details>
  <summary></summary>

  </details>

> 차이점
>
> 

## HTTP 메서드와 역할, 차이점에 대해 설명

  <details>
  <summary></summary>

  </details>

> 차이점
>
> 

## Restful에 대해 아는대로 설명

  <details>
  <summary></summary>

  </details>

> 차이점
>
> 

## CORS에 대해 설명

  <details>
  <summary></summary>

  </details>

> 차이점
>
> 

## 웹 서버 소프트웨어(Apache, Nginx)는 OSI 7계층 중 어디서 작동하는지 설명

  <details>
  <summary></summary>

  </details>

> 차이점
>
> 
